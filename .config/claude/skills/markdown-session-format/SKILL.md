---
name: markdown-session-format
description: Claude Codeセッションの標準的なMarkdownフォーマット規約。セッションログ、対話履歴、ツール実行結果を一貫した構造で記録する必要がある場合に使用。不正確な情報への注釈方法とnb標準のハッシュタグ形式も定義
allowed-tools: []
---

# Claude Code セッションマークダウンフォーマット規約

このSkillは、Claude Codeのセッション内容を記録する際の標準的なマークダウンフォーマットを定義します。

## ファイル命名規則

```text
YYYYMMDDHHMMSS.md
```

**例**: `20251120173000.md` (2025年11月20日 17:30:00)

## 基本構造テンプレート

```markdown
# [セッションタイトル] - YYYY-MM-DD HH:MM:SS

`#tag1` `#tag2` `#tag3`

## 概要
[セッションの目的、達成内容、主要な成果を3-5行で要約]

## 対話履歴

### プロンプト 1: [簡潔なタイトル]

> ユーザーの入力内容をそのまま引用

**Claudeの応答**:
[応答内容のサマリーまたは重要な部分]

**実行ツール**:
1. ツール: `ToolName`
   - 主要パラメータ: `value`
   - 目的: [なぜこのツールを使ったか]

<details>
<summary>📄 実行結果の詳細</summary>

```language
[ツールの出力内容をそのまま記載]
```

</details>

**結果**: ✅ 成功 / ❌ エラー / ⚠️ 警告

---

### プロンプト 2: [簡潔なタイトル]
...

## 参照した公式ドキュメント

すべての公式ドキュメントリンクを検証済みであることを示す：

- ✅ [ドキュメント名](https://example.com) - 検証日: YYYY-MM-DD
  - 使用箇所: プロンプト N
  - 抽出情報: [具体的に何を参照したか]

## 不正確な情報への注釈

情報の正確性に問題がある場合、以下のフォーマットで警告を追加：

> [!WARNING]
> **不正確な情報を検出**
>
> **該当箇所**: [具体的な記述]
> **問題点**: [何が不正確か]
> **根拠**: [WebFetch/context7による検証結果]
> **正しい情報**: [検証済みの正確な情報]

推論ベースの内容には明示的にマーク：

> [!NOTE]
> **推論**: この内容は公式ドキュメントに基づかない推測です。
>
> [推論内容]

## 学んだこと・重要なポイント

セッションから得られた知見を箇条書き：

- ✅ [成功したアプローチ]
- 💡 [発見した重要な概念]
- ⚠️ [注意すべき落とし穴]

## 試して失敗した方法

学習価値のため、うまくいかなかった試行も記録：

- ❌ **試したこと**: [具体的な方法]
  - **失敗理由**: [なぜうまくいかなかったか]
  - **エラーメッセージ**: `[実際のエラー文]`
  - **学び**: [この失敗から何を学んだか]

## 実行コマンドのサマリー

```bash

## 主要なコマンドを再実行可能な形で記録

command1
command2
```

## 次のステップ・TODO

- [ ] 未完了のタスク
- [ ] フォローアップが必要な項目

## メタデータ

- **作業ディレクトリ**: `/path/to/working/directory`
- **Claudeモデル**: `model-name`
- **セッション開始**: YYYY-MM-DD HH:MM:SS
- **セッション終了**: YYYY-MM-DD HH:MM:SS
- **総ツール呼び出し数**: N
- **成功**: N / **失敗**: N

```text

## タグ（ハッシュタグ）規約

### フォーマット

nb標準の `#hashtag` 形式を使用します。**重要**: フォーマッタ対策のため、各タグは必ずバッククォートで囲むこと：

```markdown
# タイトル

`#tag1` `#tag2` `#tag3`
```

### タグ配置

- タイトル（`#` 見出し）の直後の行に配置
- 各タグはバッククォート（`）で囲む
- 1行にスペース区切りで複数タグを記載
- タグ行は空行で区切らない

### タグ選定基準

**1. 技術・ツール系タグ**（使用した主要技術）:

- `#git`, `#aws`, `#typescript`, `#python`, `#docker`
- `#claude-code`, `#mcp`, `#bash`

**2. テーマ系タグ**（セッションの目的）:

- `#debugging`, `#refactoring`, `#documentation`
- `#troubleshooting`, `#configuration`, `#setup`

**3. ドメイン系タグ**（関連分野）:

- `#infra`, `#security`, `#frontend`, `#backend`
- `#devops`, `#automation`, `#monitoring`

**4. 記録タイプ系タグ**:

- `#session-log`, `#learning`, `#investigation`
- `#solution`, `#workaround`

### タグ数の目安

- **最小**: 2個
- **推奨**: 3-5個
- **最大**: 5個（可読性のため）

### タグの命名規則

- すべて小文字
- 複数単語は `-` でつなぐ（例: `#claude-code`, `#session-log`）
- 既存のnbノートブック内のタグと整合性を保つ

### タグ例

**デバッグセッション**:

```

```text

```text

```markdown

## Git pre-commit hook エラーの解決 - 2025-11-20 17:30:00

`#git` `#debugging` `#troubleshooting`
```

**インフラ設定**:

```markdown

## AWS CDKでS3バケット暗号化設定 - 2025-11-20 18:00:00

`#aws` `#infra` `#security` `#cdk`
```

**ドキュメント作成**:

```markdown

## Claude Code Subagentsの調査と設計 - 2025-11-20 19:00:00

`#claude-code` `#documentation` `#learning` `#investigation`
```

## フォーマット原則

1. **時系列順**: すべての対話を発生順に記録
2. **完全性**: プロンプト、ツール呼び出し、結果をすべて含める
3. **検証可能性**: リンクと情報源を明示
4. **再現性**: 他者が同じ手順を追えるように記述
5. **学習価値**: 成功と失敗の両方を記録
6. **タグ付け**: 検索性を高めるため適切なハッシュタグを付与

## 使用例

このSkillは以下のような場面で参照されます：

- `session-exporter` Subagentがセッションログを作成する際
- 手動でセッション記録を作成する際
- 他のエージェントがセッションフォーマットを参照する必要がある際
- nbノートブックで過去のセッションを検索する際（タグで絞り込み）
